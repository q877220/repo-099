# AI 自动文章生成系统

这是一个基于 AI 的自动博客文章生成系统，可以定时生成高质量的技术文章和教程。

## 🚀 功能特性

- 🤖 **AI 驱动**: 使用 GPT 等大语言模型生成高质量文章
- 📅 **定时生成**: 支持定时任务，每日自动生成新文章
- 🏷️ **智能分类**: 自动分配标签和分类
- 📝 **多种类型**: 支持技术文章、教程、实战项目等
- 🔄 **自动部署**: 生成后自动提交并部署到博客
- 📊 **话题管理**: 丰富的话题库，确保内容多样性

## 📋 环境要求

- Node.js 18+
- Hugo Extended
- Git
- AI API 密钥（OpenAI 或兼容接口）

## ⚙️ 安装配置

### 1. 安装依赖

```bash
npm install
```

### 2. 配置环境变量

复制 `.env.example` 为 `.env` 并填入配置：

```bash
cp .env.example .env
```

编辑 `.env` 文件：

```env
# AI API 配置
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1

# 文章生成配置
POSTS_PER_DAY=2
AUTO_PUBLISH=false
TECH_TOPICS=JavaScript,Python,React,Vue,AI,机器学习

# GitHub 自动提交（可选）
GITHUB_TOKEN=your_github_token
GITHUB_REPO=username/repo-name
```

### 3. 配置 GitHub Secrets（用于自动化）

在你的 GitHub 仓库设置中添加以下 Secrets：

- `OPENAI_API_KEY`: 你的 AI API 密钥
- `OPENAI_BASE_URL`: API 基础URL（可选）

## 🎯 使用方法

### 手动生成文章

```bash
# 生成一篇技术文章
npm run generate:tech

# 生成一篇教程文章
npm run generate:tutorial

# 指定话题生成
node scripts/generate-posts.js --type=tech --topic="React Hooks"

# 批量生成
node scripts/generate-posts.js --count=3
```

### 启动定时服务

```bash
# 启动定时生成服务
npm run generate:daily -- --start

# 测试运行
npm run generate:daily -- --test
```

### 话题管理

```bash
# 查看所有可用话题
node scripts/topic-manager.js --list

# 获取随机话题
node scripts/topic-manager.js --random

# 添加新话题
node scripts/topic-manager.js --add --category=tech --topic="新技术话题"
```

## 🤖 自动化部署

### GitHub Actions

系统包含两个 GitHub Actions 工作流：

1. **AI 自动生成** (`.github/workflows/ai-generate.yml`)
   - 每日自动生成文章
   - 支持手动触发
   - 自动提交到仓库

2. **Hugo 部署** (`.github/workflows/hugo.yml`)
   - 自动构建和部署到 GitHub Pages
   - 在代码更新时触发

### 手动触发

在 GitHub 仓库的 Actions 页面可以手动触发文章生成：

1. 进入 Actions 页面
2. 选择 "AI Auto Generate Posts"
3. 点击 "Run workflow"
4. 设置生成参数（数量、类型）

## 📊 文章质量控制

### 生成的文章包含：

- ✅ 专业的标题和摘要
- ✅ 结构化的内容组织
- ✅ 实用的代码示例
- ✅ 合适的标签和分类
- ✅ SEO 友好的格式

### 文章类型：

1. **技术文章** (`tech`)
   - 新技术介绍
   - 最佳实践分享
   - 架构设计
   - 性能优化

2. **教程文章** (`tutorial`)
   - 入门指南
   - 实战项目
   - 分步教程
   - 常见问题解答

## 🔧 自定义配置

### 修改生成频率

编辑 `scripts/daily-generator.js` 中的 cron 表达式：

```javascript
// 每天上午9点
cron.schedule('0 9 * * *', () => {
  this.dailyGeneration();
});

// 修改为每天下午2点
cron.schedule('0 14 * * *', () => {
  this.dailyGeneration();
});
```

### 添加新话题

```bash
# 前端话题
node scripts/topic-manager.js --add --category=tech --subcategory=frontend --topic="Web Components 实战"

# 后端话题
node scripts/topic-manager.js --add --category=tech --subcategory=backend --topic="GraphQL 最佳实践"

# 教程话题
node scripts/topic-manager.js --add --category=tutorials --subcategory=intermediate --topic="Docker 容器化部署"
```

### 自定义 AI 提示词

修改 `scripts/generate-posts.js` 中的 `createPrompt` 方法来自定义生成内容的风格和要求。

## 📈 监控和统计

### 查看生成日志

```bash
# 查看最近的生成记录
git log --oneline --grep="AI自动生成"

# 统计生成的文章数量
ls content/posts/ | grep $(date +%Y-%m) | wc -l
```

### 文章质量检查

生成的文章会包含 `autoGenerated: true` 标记，可以通过以下方式筛选：

```bash
# 查找AI生成的文章
grep -l "autoGenerated: true" content/posts/*.md
```

## 🛡️ 最佳实践

1. **API 密钥安全**: 绝不要将 API 密钥提交到代码仓库
2. **内容审核**: 建议设置 `AUTO_PUBLISH=false`，手动审核后发布
3. **速率限制**: 设置合理的生成间隔，避免超过 API 限制
4. **备份策略**: 定期备份生成的内容
5. **质量监控**: 定期检查生成的文章质量

## 🔄 支持的 AI 服务

- OpenAI GPT-3.5/4
- Anthropic Claude
- 国产大模型（通过兼容接口）
- 自部署模型（如 Ollama）

## 📞 故障排除

### 常见问题

1. **API 调用失败**
   - 检查 API 密钥是否正确
   - 确认网络连接
   - 检查 API 余额

2. **文章格式错误**
   - 检查 AI 返回的内容格式
   - 调整提示词
   - 增加内容解析的容错处理

3. **自动提交失败**
   - 检查 GitHub token 权限
   - 确认仓库配置
   - 检查分支保护规则

### 获取帮助

如果遇到问题，可以：

1. 查看生成日志
2. 检查环境变量配置
3. 验证 API 连接
4. 提交 Issue 获取支持

## 📄 许可证

MIT License - 请查看 [LICENSE](LICENSE) 文件了解详情。
